(this.webpackJsonpimage_uploader=this.webpackJsonpimage_uploader||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),s=a.n(o),i=(a(14),a(5)),l=a(1),c=a(3),d=a(2),p=a(4),u=a(8),m=function(e){var t=e.triggerInput,a=e.handleDropFile,n=e.addImage,o=e.inputRef,s=e.dropRef,i=e.drag,l=e.files;return r.a.createElement("section",null,r.a.createElement("div",{className:"title"},"\u0417\u0430\u0433\u0440\u0443\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432",r.a.createElement("button",{className:"btn btn--m",onClick:t},r.a.createElement("span",{className:"ico ico--add"}),r.a.createElement("span",{className:"btn__text"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),r.a.createElement("input",{className:"btn__input",ref:o,type:"file",onChange:a,accept:"image/*"}))),r.a.createElement("div",{className:"dropspace",ref:s},i&&r.a.createElement("div",{className:"dropspace__drag"},r.a.createElement("div",{className:"dropspace__text"},"\u0411\u0440\u043e\u0441\u0430\u0439\u0442\u0435, \u044f \u043b\u043e\u0432\u043b\u044e!")),l.map((function(e,t){return r.a.createElement("div",{className:"dropspace__item",key:t},r.a.createElement("img",{className:"dropspace__preview",onClick:n,src:e.src,alt:e.name}))}))))},f=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={drag:!1},a.dropRef=r.a.createRef(),a.inputRef=r.a.createRef(),a.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},a.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),console.log(a.state.drag),a.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&a.setState({drag:!0})},a.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),console.log(a.state.drag),a.dragCounter--,0===a.dragCounter&&a.setState({drag:!1})},a.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),a.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(a.props.handleDrop(e.dataTransfer.files),e.dataTransfer.clearData(),a.dragCounter=0)},a.triggerInput=function(e){e.persist(),a.inputRef.current.click()},a.render=function(){return r.a.createElement(m,{triggerInput:a.triggerInput,handleDropFile:a.props.handleDropFile,addImage:a.props.addImage,inputRef:a.inputRef,dropRef:a.dropRef,drag:a.state.drag,files:a.props.files})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}}]),t}(r.a.Component),g=function(e){var t=e.onMouseDown,a=e.onMouseUp,n=e.onRemoveImage,o=e.images,s=e.select,i=e.position;return r.a.createElement("section",null,r.a.createElement("div",{className:"title"},"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c"),r.a.createElement("div",{className:"workspace"},o.map((function(e,o){return r.a.createElement("div",{className:s===o?"workspace__item workspace__item--active":"workspace__item",key:o,draggable:"true",onMouseUp:function(e){return a(e,o)},onMouseDown:function(e){return t(e,o)},style:s===o?{transform:"translateY("+i.y+"px) translateX("+i.x+"px) translateZ(0)"}:{transform:"translateY("+e.position.top+"px) translateX("+e.position.left+"px) translateZ(0)"}},r.a.createElement("img",{className:"workspace__preview",src:e.src,alt:""}),r.a.createElement("button",{className:"btn btn--del",onClick:function(e){return n(e,o)}},r.a.createElement("span",{className:"ico ico--del"}),r.a.createElement("span",{className:"btn__text"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}))))},v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={files:[],images:[],position:{x:0,y:0},offset:{x:0,y:0},coord:{x:0,y:0},select:null},a.handleDrop=function(e){for(var t=function(t){if(!e[t].name)return{v:void 0};var n=e[t].name,r=new FileReader;r.readAsDataURL(e[t]),r.onload=function(e){var t=e.target.result;a.setState({files:[].concat(Object(i.a)(a.state.files),[{name:n,src:t}])})}},n=0;n<e.length;n++){var r=t(n);if("object"===typeof r)return r.v}},a.handleDropFile=function(e){var t=e.target.files;a.handleDrop(t)},a.addImage=function(e){a.setState({images:[].concat(Object(i.a)(a.state.images),[{src:e.target.src,position:{top:0,left:724*Math.random()}}])})},a.removeImage=function(e,t){a.setState({select:null,images:a.state.images.filter((function(e,a){return a!==t}))})},a.handleMouseMove=function(e){var t=a.state,n=t.coord,r=t.offset,o=n.x+e.clientX-r.x,s=n.y+e.clientY-r.y;return a.setState({position:{x:o,y:s}}),!1},a.handleMouseUp=function(e,t){e.preventDefault();var n=a.state,r=n.select,o=n.coord,s=n.offset;if(null!==r){var i=o.y+e.clientY-s.y,l=o.x+e.clientX-s.x;a.setState({images:a.state.images.map((function(e,a){return a===t?{src:e.src,position:{top:i,left:l}}:e}))}),document.removeEventListener("mousemove",a.handleMouseMove)}return!1},a.handleMouseDown=function(e,t){e.preventDefault();var n=a.state.images[t],r=e.clientX,o=e.clientY,s=parseInt(n.position.left),i=parseInt(n.position.top);return a.setState({select:t,offset:{x:r,y:o},coord:{x:s,y:i},position:{x:s,y:i}}),document.addEventListener("mousemove",a.handleMouseMove),!1},a.render=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(g,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp,onRemoveImage:a.removeImage,images:a.state.images,select:a.state.select,position:a.state.position}),r.a.createElement(f,{handleDrop:a.handleDrop,handleDropFile:a.handleDropFile,addImage:a.addImage,files:a.state.files}))},a}return Object(p.a)(t,e),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.f2f77d76.chunk.js.map